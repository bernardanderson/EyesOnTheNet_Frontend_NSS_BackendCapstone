<div class="ui grid">
  <div class="three wide column">
    <div class="ui vertical menu">
      <div class="item">
        <div class="ui icon input">
          <input type="text" placeholder="Search..." #cameraTerm (keyup)="cameraTerm">
          <i class="search icon"></i>
        </div>
      </div>

      <div class="item">

        <div class="ui button fluid" *ngIf="router.url!=='/camera/record'" (click)="refreshTimer()">
          <i class="wait icon"></i>
            Refresh All: {{refreshTimerOptions[0].message}}
        </div>

        <div class="ui button disabled fluid" *ngIf="router.url==='/camera/record'">
          <i class="wait icon"></i>
            Refresh Disabled
        </div>


        <h5 class="ui tiny grey center aligned header">
          Available Cameras
        </h5>
      </div>

      <a class="item" *ngFor="let camera of (userCameraList | cameraSearchPipe:cameraTerm.value)" (click)="addCamerasToView(camera)">
        <h4 class="ui header centered">{{camera.name}}</h4>
      </a>
    </div>
  </div>
  
  <div class="twelve wide column">

    <div [ngSwitch]="router.url">

      <!-- The View for multiple Cameras -->
      <div *ngSwitchCase="'/camera/multicamera'">
        <div class="ui two column grid">
          <div class="column" *ngFor="let camera of viewingCameras">
              <div class="ui segment" (click)="camPicMenu($event, camera)">
                <div class="ui grid">
                  <div class="column">
                    <h3 class="ui header centered">{{camera.name}}</h3>
                    <img class="ui rounded image centered" [src]="camera.cameraURL"/>
                    <div class="ui four item text menu">
                      <a class="item">
                        <i class="zoom icon"></i> Expand
                      </a>
                      <a class="item">
                        <i class="edit icon"></i> Edit
                      </a>
                      <a class="item">
                        <i class="refresh icon"></i> Refresh
                      </a>
                      <a class="item">
                        <i class="remove icon"></i> Close
                      </a>
                    </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      
    <!--The view for a single camera-->
    <div *ngSwitchCase="'/camera/singlecamera'">
      <div class="ui one column grid" *ngFor="let oneSingleCamera of currentSingleCamera">
        <div class="ui column">
          <div class="ui two column grid">
            
            <!--Large Image Panel-->
            <div class="eleven wide column">
              <div class="ui segment" (click)="camPicMenu($event, oneSingleCamera)">
                <div class="ui grid">
                  <div class="column">
                    <h3 class="ui header centered">{{oneSingleCamera.name}}</h3>
                    <img class="ui rounded huge image centered" [src]=oneSingleCamera.cameraURL>
                    <div class="ui four item text menu">
                      <a class="item">
                        <i class="edit icon"></i> Edit
                      </a>
                      <a class="item">
                        <i class="refresh icon"></i> Refresh
                      </a>
                      <a class="item">
                        <i class="remove icon"></i> Close
                      </a>
                    </div>
                  </div>
                </div>
              </div>
            </div>
           
           <!--Google Map Panel-->
            <div class="five wide column">
              <div class="ui segment">
                <div class="ui grid">
                  <div class="column"> 
                    <h3 class="ui header centered">GeoLocation</h3>
                    <img class="ui rounded image centered" [src]="oneSingleCamera.googleMapURL">
                    <div class="ui two item text menu">
                      <a class="item" (click)="mapZoom('out')">
                        <i class="small zoom out icon"></i> Zoom Out
                      </a>
                      <a class="item" (click)="mapZoom('in')">
                        <i class="small zoom icon"></i> Zoom In
                      </a>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!--Location Panel-->
            <div class="ui segment thirtytopmargin">
              <h3 class="ui header centered">Physical Address: {{oneSingleCamera.location}}</h3>
            </div>
          
        </div>
      </div>
    </div>

    <!--The view for the record camera-->
    <div *ngSwitchCase="'/camera/record'">
      <div *ngIf="recordingCameras.length === 0">
        <div class="ui info message">
          <div class="header">
            Select Cameras from the Left Menu to Record Their Feeds 
          </div>
        </div>
      </div>

      <table class="ui celled striped table" *ngIf="recordingCameras.length !== 0">
        <thead>
          <tr> 
            <th class="ui header" colspan="3">Cam Feeds Recorded</th>
          </tr>
          <tr>
            <th class="ui center aligned">Cam #</th>
            <th class="ui center aligned">Camera Name</th>
            <th class="ui center aligned">Thumbnail</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let oneRecordingCamera of recordingCameras; let i = index">
            <td class="ui center aligned">{{i + 1}}</td>
            <td class="ui center aligned">{{oneRecordingCamera.name}}</td>
            <td><img class="ui rounded image small centered" [src]="oneRecordingCamera.cameraURL"/></td>
          </tr>
        </tbody>
        <tfoot>
          <tr>
            <th></th>
            <th>
              <div class="ui right floated right labeled fluid input">
                <input type="text" #delayTime placeholder="Record Frequency (5s or greater)">
                <div class="ui basic label">
                  sec per capture
                </div>
              </div>
            </th>
            <th class="ui center aligned">
              <div class="ui blue button" (click)="recordCamerasTimer(delayTime.value)">Update Recording Cameras</div>
            </th>
          </tr>
        </tfoot>
      </table>

    </div>

<!--Start Add/Edit Camera modal-->

<div class="ui modal addcamera" >
  <div class="header">
    <span [ngSwitch]="addEditCamera.cameraId !== null">
      <span *ngSwitchCase="true">Editing <strong>{{addEditCamera.name}}</strong> Cam</span>
      <span *ngSwitchDefault>Add A New Camera</span>
    </span>
  </div>

  <div class="content">
    <div class="ui form">
      <div class="fields">
        <div class="nine wide field">
          <label>Unique Camera Name</label>
          <div class="ui left icon input">
            <i class="camera retro icon"></i>
            <input type="text" placeholder="Camera Name (Required)" [(ngModel)]="addEditCamera.name" >
          </div>        
        </div>

        <div class="three wide field">
          <label>Camera Type</label>
          <select class="ui fluid search dropdown" [(ngModel)]="addEditCamera.type">
            <option [ngValue]="0">Foscam</option>
            <option [ngValue]="1">IP Cam</option>
            <option [ngValue]="2">Public</option>
          </select>
        </div>     
      </div>

      <div class="fields">
        <div class="five wide field">
          <label>User Name (for Authentication)</label>
          <div class="ui left icon input">
            <i class="user icon"></i>
            <input type="text" placeholder="Leave blank if none..." [(ngModel)]="addEditCamera.loginName">
          </div>        
        </div>

        <div class="five wide field">
          <label>User Password (for Authentication)</label>
          <div class="ui left icon input">
            <i class="unlock icon"></i>
            <input type="text" placeholder="Leave blank if none..." [(ngModel)]="addEditCamera.loginPass">
          </div>        
        </div>

        <div class="five wide field">
          <label>Allow Other Users Access?</label>
          <select class="ui fluid search dropdown" [(ngModel)]="addEditCamera.private">
            <option [ngValue]="1">Keep Private</option>
            <option [ngValue]="0">Make Public</option>
          </select>
        </div>  
      </div>

      <div class="field">
        <label>Camera Web Address</label>
        <div class="ui labeled input">
          <div class="ui label">
            http://
          </div>
          <input type="text" placeholder="Web Url... (https not supported)" [(ngModel)]="addEditCamera.webAddress">
        </div>     
      </div>

      <div class="field">
        <label>Physical Location or Address</label>
        <div class="ui left icon input">
          <i class="map signs icon"></i>
          <input type="text" placeholder="Example: 1111 East 8th Ave, Somewhere, ST 99911" [(ngModel)]="addEditCamera.location">
        </div>      
      </div>

    </div>
  </div>
    
  <div class="actions">
    <div *ngIf="addEditCameraError.hasError"  class="ui negative message">
      <div class="header">{{addEditCameraError.message}}</div>
    </div>
    <div *ngIf="addEditCamera.cameraId !== null" class="ui left floated animated fade red button" (click)="deleteCamera()">
      <div class="visible content">
        <i class="trash outline icon"></i>
        Delete Camera
      </div>
      <div class="hidden content">
        <i class="warning sign icon"></i>
        Cannot Be Undone
      </div>
    </div>
    <div class="ui black deny button" (click)="abortCameraSubmit()">
      Forget It
    </div>
    <div class="ui positive button" (click)="submitCamera()">
      <span [ngSwitch]="addEditCamera.cameraId !== null">
        <span *ngSwitchCase="true">Update Camera</span>
        <span *ngSwitchDefault>Submit New Camera</span>
      </span>
    </div>
  </div>
</div>
<!--End Add/Edit Camera modal-->